{% extends 'main/base.html' %}

{% block content %}
<div class="max-w-2xl mx-auto">
    <h2 class="text-2xl font-bold mb-4">할 일 목록</h2>
    
    <form method="post" class="mb-6">
        {% csrf_token %}
        <div class="flex gap-2">
            <input type="text" name="title" required
                   class="flex-1 border rounded px-3 py-2"
                   placeholder="새로운 할 일을 입력하세요">
            <button type="submit" name="add" 
                    class="bg-blue-500 text-white px-4 py-2 rounded">
                추가
            </button>
        </div>
    </form>

    <div class="space-y-3">
        {% for todo in todos %}
        <div class="flex items-center justify-between bg-white p-4 rounded shadow">
            <span class="{% if todo.completed %}line-through text-gray-500{% endif %}">
                {{ todo.title }}
            </span>
            <form method="post" class="inline">
                {% csrf_token %}
                <input type="hidden" name="todo_id" value="{{ todo.id }}">
                <button type="submit" name="toggle" 
                        class="text-sm bg-gray-200 px-3 py-1 rounded">
                    {% if todo.completed %}
                        취소
                    {% else %}
                        완료
                    {% endif %}
                </button>
            </form>
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}